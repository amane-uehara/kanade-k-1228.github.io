<!-- (ฅ^･ω･^ฅ) ﾆｬｰ -->

<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  lang="ja"
  xml:lang="ja"
  prefix="og: http://ogp.me/ns#"
>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-114187773-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-114187773-1");
    </script>
    <!-- End Google Analytics -->
    <!-- Load Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap"
      rel="stylesheet"
    />
    <!-- End Google Font -->

    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="author" content="@kanade_k_1228" />
    <link
      rel="shortcut icon"
      href="https://avatars.githubusercontent.com/u/54773334"
    />
        <meta name="dcterms.date" content="2022-08-23" />
         <meta name="keywords" content="リフロー, 表面実装, ホットプレート" />
         <title>5000 円で作るリフロー装置 | Kanade's Website</title>

    <!-- OGP -->
        <!-- END OGP -->

    <!-- Twitter Card -->
        <!-- END Twitter Card -->

    <link
      rel="stylesheet"
      href="https://kanade-k-1228.github.io/.common/light.css"
      id="style"
    />
        <script
      type="text/javascript"
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <style>
      mjx-container[jax="CHTML"][display="true"] {
        display: block;
        text-align: center;
        margin: 0;
      }
    </style>
    <!-- SyntaxHighlight -->
    <link
      rel="stylesheet"
      href="https://kanade-k-1228.github.io/.common/highlight.css"
    />
    <script src="https://kanade-k-1228.github.io/.common/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>

    <script>
      function tweet() {
        window.open(
          "https://twitter.com/intent/tweet?via=kanade_k_1228&related=kanade_k_1228&url=" +
            location.href +
            "&text=" +
            "5000 円で作るリフロー装置",
          "_blank"
        );
      }
    </script>
    <script src="https://kanade-k-1228.github.io/.common/changeStyle.js"></script>
    <script src="https://kanade-k-1228.github.io/.common/command.js"></script>
  </head>

  <body>
    <article>
      <header>
        <ul>
          <li><a href="/">ﾎｰﾑ</a></li>
          <li><a href="/Portfolio/">ﾎﾟﾄﾌｫﾘｵ</a></li>
          <li><a href="/Lab/">研究室</a></li>
          <li><a href="/Blog/">雑記</a></li>
        </ul>
        <div id="header-links">
          <a href="https://twitter.com/kanade_k_1228" target="_blank">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="50"
              height="50"
              viewBox="126.444 2.281 589 589"
              style="margin: 0; padding: 0"
            >
              <circle cx="420.944" cy="296.781" r="294.5" fill="#2daae1" />
              <path
                d="M609.773 179.634c-13.891 6.164-28.811 10.331-44.498 12.204 16.01-9.587 28.275-24.779 34.066-42.86a154.78 154.78 0 0 1-49.209 18.801c-14.125-15.056-34.267-24.456-56.551-24.456-42.773 0-77.462 34.675-77.462 77.473 0 6.064.683 11.98 1.996 17.66-64.389-3.236-121.474-34.079-159.684-80.945-6.672 11.446-10.491 24.754-10.491 38.953 0 26.875 13.679 50.587 34.464 64.477a77.122 77.122 0 0 1-35.097-9.686v.979c0 37.54 26.701 68.842 62.145 75.961-6.511 1.784-13.344 2.716-20.413 2.716-4.998 0-9.847-.473-14.584-1.364 9.859 30.769 38.471 53.166 72.363 53.799-26.515 20.785-59.925 33.175-96.212 33.175-6.25 0-12.427-.373-18.491-1.104 34.291 21.988 75.006 34.824 118.759 34.824 142.496 0 220.428-118.052 220.428-220.428 0-3.361-.074-6.697-.236-10.021a157.855 157.855 0 0 0 38.707-40.158z"
                fill="#fff"
              />
            </svg>
          </a>
          <a href="https://github.com/kanade-k-1228" target="_blank">
            <svg
              width="50px"
              height="50px"
              viewBox="0 0 1024 1024"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"
                transform="scale(64)"
                fill="#1B1F23"
              />
            </svg>
          </a>
          <a href="https://t.co/E5xtfEQs4A" target="_blank">
            <img
              src="https://kanade-k-1228.github.io/.common/niconico.png"
              width="50px"
              height="50px"
              style="border-radius: 50%"
          /></a>
          <a
            href="https://www.youtube.com/channel/UCoeuc9-XQ5EpeYSCn4ESpQw"
            target="_blank"
          >
            <svg
              width="50px"
              height="50px"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 333333 333333"
            >
              <path
                d="M166667 0c92048 0 166667 74619 166667 166667s-74619 166667-166667 166667S0 258715 0 166667 74619 0 166667 0zm84195 132297s-1678-11849-6843-17052c-6545-6843-13873-6887-17223-7283-24036-1751-60138-1751-60138-1751h-63s-36085 0-60135 1751c-3363 409-10681 437-17223 7283-5168 5203-6811 17052-6811 17052s-1711 13904-1711 27838v13029c0 13905 1709 27837 1709 27837s1678 11849 6811 17061c6542 6843 15139 6621 18977 7350 13761 1314 58457 1710 58457 1710s36133-64 60169-1783c3363-397 10678-438 17223-7284 5168-5202 6843-17065 6843-17065s1711-13904 1711-27837v-13028c-35-13905-1745-27837-1745-27837l-9 9-1-1zm-102010 56674v-48312l46437 24237-46437 24075z"
                fill="red"
              />
            </svg>
          </a>
        </div>
        <!-- End Top Nav -->
        <!-- Title -->
                <h1 style="margin: 0">5000 円で作るリフロー装置</h1>
                <!-- Date -->
                <p align="right">2022-08-23</p>
                <!-- Description -->
              </header>

      <!-- TeX Macros -->
      <!-- prettier-ignore -->
      <p style="display: none">
      \[ \newcommand{dn}[3]{\frac{\mathrm{d}^{#3} #1}{\mathrm{d} #2^{#3}}}
      \newcommand{\d}[2]{\frac{\mathrm{d} #1}{\mathrm{d} #2}}
      \newcommand{\dd}[2]{\frac{\mathrm{d}^2 #1}{\mathrm{d} {#2}^2}}
      \newcommand{\ddd}[2]{\frac{\mathrm{d}^3 #1}{\mathrm{d} {#2}^3}}
      \newcommand{\pdn}[3]{\frac{\partial^{#3} #1}{\partial {#2}^{#3}}}
      \newcommand{\pd}[2]{\frac{\partial #1}{\partial #2}}
      \newcommand{\pdd}[2]{\frac{\partial^2 #1}{\partial {#2}^2}}
      \newcommand{\pddd}[2]{\frac{\partial^3 #1}{\partial {#2}^3}}
      \newcommand{\p}{\partial}
      \newcommand{\D}[2]{\frac{\mathrm{D} #1}{\mathrm{D} #2}}
      \newcommand{\Re}{\mathrm{Re}}
      \newcommand{\Im}{\mathrm{Im}}
      \newcommand{\bra}[1]{\left\langle #1 \right|}
      \newcommand{\ket}[1]{\left|#1 \right\rangle}
      \newcommand{\braket}[2]{\left\langle #1 \middle|#2 \right\rangle}
      \newcommand{\inner}[2]{\left\langle #1 ,#2 \right\rangle}
      \newcommand{\l}{\left} \newcommand{\m}{\middle} \newcommand{\r}{\right}
      \newcommand{\f}[2]{\frac{#1}{#2}} \newcommand{\eps}{\varepsilon}
      \newcommand{\ra}{\rightarrow} \newcommand{\F}{\mathcal{F}}
      \newcommand{\L}{\mathcal{L}} \newcommand{\t}{\quad}
      \newcommand{\intinf}{\int_{-\infty}^{+\infty}}
      \newcommand{\R}{\mathcal{R}} \newcommand{\C}{\mathcal{C}}
      \newcommand{\Z}{\mathcal{Z}} \newcommand{\bm}[1]{\boldsymbol{#1}} \]
    </p>

      <!-- Table of Contents -->
            <nav><ul>
<li><a href="#設計">設計</a></li>
<li><a href="#回路">回路</a></li>
<li><a href="#制御">制御</a>
<ul>
<li><a href="#温度制御">温度制御</a></li>
<li><a href="#温度計測">温度計測</a></li>
<li><a href="#温度逆算">温度逆算</a></li>
<li><a href="#温度プロファイル">温度プロファイル</a></li>
<li><a href="#温度プロファイルのフォーマット">温度プロファイルのフォーマット</a></li>
<li><a href="#ux">UX</a></li>
<li><a href="#通信方式">通信方式</a></li>
</ul></li>
</ul></nav>
       <h2 id="設計">設計</h2>
<p><img src="img/about.dio.svg" /></p>
<ul>
<li>サーミスタで温度を計測しフィードバック制御する</li>
</ul>
<p><img src="img/ui.dio.svg" /></p>
<ul>
<li>温度プロファイルの設定 UI は、React で実装する</li>
<li>Web Serial API を使ってブラウザと Arduino でシリアル通信する</li>
<li>リアルタイムで温度のグラフを表示する</li>
</ul>
<h2 id="回路">回路</h2>
<p><img src="img/Circuit.png" /></p>
<table>
<thead>
<tr class="header">
<th></th>
<th></th>
<th>値段</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HOT</td>
<td><a href="https://amzn.asia/d/dPVi2IT">ホットプレート</a></td>
<td>1518</td>
<td>750W</td>
</tr>
<tr class="even">
<td>IC1</td>
<td><a href="https://akizukidenshi.com/catalog/g/gI-07634/">フォトトライアック</a></td>
<td>70</td>
<td></td>
</tr>
<tr class="odd">
<td>IC2</td>
<td><a href="https://akizukidenshi.com/catalog/g/gK-10347/">秋月 Arduino</a></td>
<td>950</td>
<td></td>
</tr>
<tr class="even">
<td>Q1</td>
<td><a href="https://akizukidenshi.com/catalog/g/gI-01017/">トライアック</a></td>
<td>160</td>
<td></td>
</tr>
<tr class="odd">
<td>Q2</td>
<td><a href="https://akizukidenshi.com/catalog/g/gI-15751/">MOSFET</a></td>
<td>50</td>
<td>Nch</td>
</tr>
<tr class="even">
<td>R1</td>
<td>100Ω</td>
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>R2</td>
<td>330Ω</td>
<td>1</td>
<td></td>
</tr>
<tr class="even">
<td>R3</td>
<td><a href="https://akizukidenshi.com/catalog/g/gR-25101/">100Ω</a></td>
<td>1</td>
<td>ゲート抵抗</td>
</tr>
<tr class="odd">
<td>R4</td>
<td><a href="https://akizukidenshi.com/catalog/g/gR-25103/">10kΩ</a></td>
<td>1</td>
<td>ゲートソース抵抗</td>
</tr>
<tr class="even">
<td>R5</td>
<td><a href="https://akizukidenshi.com/catalog/g/gR-25470/">47Ω</a></td>
<td>1</td>
<td>サーミスタ分圧</td>
</tr>
<tr class="odd">
<td>C1</td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-15927/">0.1μF セラコン</a></td>
<td>12</td>
<td>モーターノイズ用</td>
</tr>
<tr class="even">
<td>ZNR</td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-12563/">バリスタ</a></td>
<td>25</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-01306/">ターミナル</a></td>
<td>60</td>
<td>3 個</td>
</tr>
<tr class="even">
<td>FAN</td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-16828/">DC ファン</a></td>
<td>280</td>
<td>DC 5V 0.3A</td>
</tr>
<tr class="odd">
<td>NTC</td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-11896/">NT サーミスタ</a></td>
<td>50</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>POW</td>
<td><a href="https://akizukidenshi.com/catalog/g/gM-11996/">5V 電源</a></td>
<td>580</td>
<td>5V 2A</td>
</tr>
<tr class="even">
<td>POW</td>
<td><a href="https://akizukidenshi.com/catalog/g/gC-09408/">DC ジャック</a></td>
<td>30</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-05051/">ヒートシンク（トライアック用）</a></td>
<td>110</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-05052/">ヒートシンク（FET 用）</a></td>
<td>35</td>
<td>不要かも</td>
</tr>
<tr class="even">
<td></td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-12791/">絶縁放熱シート</a></td>
<td>40</td>
<td>2 枚</td>
</tr>
<tr class="odd">
<td></td>
<td><a href="https://akizukidenshi.com/catalog/g/gP-10359/">M3 プラネジ</a></td>
<td>4</td>
<td>2 本</td>
</tr>
<tr class="even">
<td>合計</td>
<td></td>
<td>3979</td>
<td></td>
</tr>
</tbody>
</table>
<p><a href="https://akizukidenshi.com/catalog/g/gT-09379/">カプトンテープ</a></p>
<h2 id="制御">制御</h2>
<h3 id="温度制御">温度制御</h3>
<ul>
<li>トライアックがゼロクロス
<ul>
<li>→ 最大でも 50/60Hz の制御</li>
<li>とりあえず PI 制御でいいかな</li>
<li>分岐予測器みたいなオートマトンを使った ON/OFF 制御でもよさそう
<ul>
<li>離散化した PI 制御と等価になりそう</li>
</ul></li>
</ul></li>
</ul>
<h3 id="温度計測">温度計測</h3>
<ul>
<li>サーミスタの特性
<ul>
<li><a href="https://www.semitec.co.jp/uploads/2021/11/nt_thermistor2015.pdf">データシート</a></li>
</ul></li>
</ul>
<p><span class="math display">\[
R(T) = R_0 \exp \l[ B \l( \f{1}{T} - \f{1}{T_0} \r) \r]
\]</span></p>
<p><span class="math display">\[
V(T) = V_0 \f{R_P}{R(T)+R_P}
\]</span></p>
<ul>
<li>基準温度：<span class="math inline">\(T_0=298 \rm{K} (25°C)\)</span></li>
<li>基準抵抗：<span class="math inline">\(R_0=10000 \Omega\)</span></li>
<li>B 定数：<span class="math inline">\(B=4126 \rm{K}\)</span></li>
<li>分圧抵抗：<span class="math inline">\(R_P=47 \Omega\)</span></li>
<li>全電圧：<span class="math inline">\(V_0=5\rm{V}\)</span></li>
</ul>
<h3 id="温度逆算">温度逆算</h3>
<p><span class="math display">\[
R(T) = R_P \l(\f{V_0}{V(T)}-1\r)
\]</span></p>
<p><span class="math display">\[
\f{1}{T} = \f{1}{B} \ln\l(\f{R(T)}{R_0}\r) + \f{1}{T_0}
\]</span></p>
<p><span class="math display">\[
T = \l\{\f{1}{B} \ln\l[\f{R_P}{R_0}\l(\f{V_0}{V(T)}-1\r)\r] + \f{1}{T_0}\r\}^{-1}
\]</span></p>
<ol type="1">
<li>ADC の値<span class="math inline">\(V_A\)</span>から</li>
</ol>
<p><span class="math display">\[
X = \f{47}{10000}\f{1024-V_{A}}{V_{A}}
\]</span></p>
<ol start="2" type="1">
<li>対数を取る</li>
</ol>
<p><span class="math display">\[
Y = \ln X
\]</span></p>
<p>対数関数は <span class="math inline">\(X\sim 0.01\)</span> のまわりで近似したものを使う</p>
<ol start="3" type="1">
<li>温度を得る</li>
</ol>
<p><span class="math display">\[
\f{1}{T}=\f{Y}{B} + \f{1}{T_0}
\]</span></p>
<h3 id="温度プロファイル">温度プロファイル</h3>
<ol type="1">
<li>△ 2 ~ 3 °C/sec</li>
<li>150 ~ 175 °C / 60 ~ 120 sec</li>
<li>△ 4 °C/sec</li>
<li>250 °C / 60 ~ 90 sec</li>
<li>ファンで急冷</li>
</ol>
<h3 id="温度プロファイルのフォーマット">温度プロファイルのフォーマット</h3>
<table>
<tbody>
<tr class="odd">
<td>0</td>
<td>7~4</td>
<td>ステップ番号(0~15)</td>
</tr>
<tr class="even">
<td>0</td>
<td>3~0</td>
<td>内容(0:SLOPE,1:CONST,2:FAN,3:END)</td>
</tr>
<tr class="odd">
<td>1</td>
<td>7~0</td>
<td>温度(SLOPE,FAN なら到達目標温度、CONST なら維持する温度)</td>
</tr>
<tr class="even">
<td>2</td>
<td>7~0</td>
<td>時間(sec)</td>
</tr>
</tbody>
</table>
<h4 id="例">例</h4>
<table>
<tbody>
<tr class="odd">
<td>0000-0000</td>
<td>#0 SLOPE</td>
<td>60 秒で 150°C まで上げる</td>
</tr>
<tr class="even">
<td>0d 150</td>
<td>150 °C</td>
<td></td>
</tr>
<tr class="odd">
<td>0d 60</td>
<td>60 sec</td>
<td></td>
</tr>
<tr class="even">
<td>0001-0001</td>
<td>#1 CONST</td>
<td>90 秒間 150°C を維持</td>
</tr>
<tr class="odd">
<td>0d 150</td>
<td>150 °C</td>
<td></td>
</tr>
<tr class="even">
<td>0d 90</td>
<td>90 sec</td>
<td></td>
</tr>
<tr class="odd">
<td>0010-0000</td>
<td>#2 SLOPE</td>
<td>60 秒で 250°C まで上げる</td>
</tr>
<tr class="even">
<td>0d 250</td>
<td>250 °C</td>
<td></td>
</tr>
<tr class="odd">
<td>0d 30</td>
<td>30 sec</td>
<td></td>
</tr>
<tr class="even">
<td>0011-0001</td>
<td>#3 CONST</td>
<td>60 秒間 250°C を維持</td>
</tr>
<tr class="odd">
<td>0d 250</td>
<td>250 °C</td>
<td></td>
</tr>
<tr class="even">
<td>0d 60</td>
<td>60 sec</td>
<td></td>
</tr>
<tr class="odd">
<td>0100-0010</td>
<td>#4 FAN</td>
<td>30 °C になるまでファンで冷却</td>
</tr>
<tr class="even">
<td>0d 30</td>
<td>30 °C</td>
<td></td>
</tr>
<tr class="odd">
<td>0</td>
<td>- sec</td>
<td></td>
</tr>
<tr class="even">
<td>0101-0011</td>
<td>#5 END</td>
<td>おわり</td>
</tr>
<tr class="odd">
<td>0</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>0</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="ux">UX</h3>
<ol type="1">
<li>GUI でプロファイル指定</li>
<li>RUN ボタン押す</li>
<li>温度制御開始</li>
<li>温度モニタリング</li>
</ol>
<h3 id="通信方式">通信方式</h3>
<h4 id="実行命令">実行命令</h4>
<ul>
<li>温度プロファイルを送信することでリフローを開始する</li>
<li>フォーマットは、</li>
</ul>
<h4 id="停止命令">停止命令</h4>

      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="50"
        height="50"
        viewBox="126.444 2.281 589 589"
        style="margin: auto; padding: 0; display: block"
        onclick="tweet();"
      >
        <circle cx="420.944" cy="296.781" r="294.5" fill="#2daae1" />
        <path
          d="M609.773 179.634c-13.891 6.164-28.811 10.331-44.498 12.204 16.01-9.587 28.275-24.779 34.066-42.86a154.78 154.78 0 0 1-49.209 18.801c-14.125-15.056-34.267-24.456-56.551-24.456-42.773 0-77.462 34.675-77.462 77.473 0 6.064.683 11.98 1.996 17.66-64.389-3.236-121.474-34.079-159.684-80.945-6.672 11.446-10.491 24.754-10.491 38.953 0 26.875 13.679 50.587 34.464 64.477a77.122 77.122 0 0 1-35.097-9.686v.979c0 37.54 26.701 68.842 62.145 75.961-6.511 1.784-13.344 2.716-20.413 2.716-4.998 0-9.847-.473-14.584-1.364 9.859 30.769 38.471 53.166 72.363 53.799-26.515 20.785-59.925 33.175-96.212 33.175-6.25 0-12.427-.373-18.491-1.104 34.291 21.988 75.006 34.824 118.759 34.824 142.496 0 220.428-118.052 220.428-220.428 0-3.361-.074-6.697-.236-10.021a157.855 157.855 0 0 0 38.707-40.158z"
          fill="#fff"
        />
      </svg>
    </article>
  </body>
</html>
